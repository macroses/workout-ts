<script lang="ts" setup>
import Icon from "@/components/ui/Icon.vue";
import { useChallengeStore } from "@/stores/challengesStore";
import { ref } from "vue";
import dayjs from "dayjs";

const store = useChallengeStore();
const startAt = ref("");
const endAt = ref("");

const setStart = () => {
  store.challengeStartAt = dayjs(startAt.value);
};
const setEnd = () => {
  store.challengeEndAt = dayjs(endAt.value);
};

const title = "–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–Ω—å—à–µ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ –¥–Ω—è. –ê –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–Ω—å—à–µ –Ω–∞—á–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã.üòÄ"
</script>

<template>
  <div class="challenge-body__item">
    <div v-once class="challenge-start__title" :title="title">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</div>
    <div class="challenge-start__content">
      <label class="datepicker-toggle">
        <span v-once class="datepicker-toggle__name">–ù–∞—á–∞–ª–æ:</span>
        <Icon icon-name="calendar-days" width="17px" />
        <input
          v-model="startAt"
          class="datepicker-input"
          name="start"
          type="date"
          @change="setStart"
        />
        <span class="challenge-start__value">{{
          startAt ? dayjs(startAt).format("DD.MM.YYYY") : ""
        }}</span>
      </label>

      <label class="datepicker-toggle">
        <span v-once class="datepicker-toggle__name">–ö–æ–Ω–µ—Ü:</span>
        <Icon icon-name="calendar-days" width="17px" />
        <input
          v-model="endAt"
          class="datepicker-input"
          name="end"
          type="date"
          @change="setEnd"
        />
        <span class="challenge-start__value">{{
          endAt ? dayjs(endAt).format("DD.MM.YYYY") : ""
        }}</span>
      </label>
    </div>
  </div>
</template>
